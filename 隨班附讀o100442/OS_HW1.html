<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">ul.lst-kix_u0t1flar8n0h-6{list-style-type:none}.lst-kix_czoak3cjx1nv-7>li:before{content:"\0025cb  "}ul.lst-kix_u0t1flar8n0h-7{list-style-type:none}ul.lst-kix_u0t1flar8n0h-4{list-style-type:none}.lst-kix_czoak3cjx1nv-6>li:before{content:"\0025cf  "}.lst-kix_czoak3cjx1nv-8>li:before{content:"\0025a0  "}ul.lst-kix_u0t1flar8n0h-5{list-style-type:none}.lst-kix_czoak3cjx1nv-5>li:before{content:"\0025a0  "}ul.lst-kix_u0t1flar8n0h-8{list-style-type:none}.lst-kix_czoak3cjx1nv-3>li:before{content:"\0025cf  "}.lst-kix_czoak3cjx1nv-2>li:before{content:"\0025a0  "}.lst-kix_czoak3cjx1nv-4>li:before{content:"\0025cb  "}.lst-kix_x6j19jn7jsq1-8>li:before{content:"\0025a0  "}.lst-kix_u0t1flar8n0h-3>li:before{content:"\0025cf  "}ul.lst-kix_czoak3cjx1nv-5{list-style-type:none}ul.lst-kix_czoak3cjx1nv-4{list-style-type:none}.lst-kix_u0t1flar8n0h-4>li:before{content:"\0025cb  "}ul.lst-kix_czoak3cjx1nv-7{list-style-type:none}ul.lst-kix_czoak3cjx1nv-6{list-style-type:none}.lst-kix_u0t1flar8n0h-5>li:before{content:"\0025a0  "}ul.lst-kix_czoak3cjx1nv-1{list-style-type:none}ul.lst-kix_czoak3cjx1nv-0{list-style-type:none}ul.lst-kix_czoak3cjx1nv-3{list-style-type:none}ul.lst-kix_czoak3cjx1nv-2{list-style-type:none}.lst-kix_u0t1flar8n0h-7>li:before{content:"\0025cb  "}.lst-kix_u0t1flar8n0h-6>li:before{content:"\0025cf  "}.lst-kix_u0t1flar8n0h-8>li:before{content:"\0025a0  "}ul.lst-kix_u0t1flar8n0h-2{list-style-type:none}ul.lst-kix_u0t1flar8n0h-3{list-style-type:none}ul.lst-kix_u0t1flar8n0h-0{list-style-type:none}ul.lst-kix_u0t1flar8n0h-1{list-style-type:none}ul.lst-kix_czoak3cjx1nv-8{list-style-type:none}.lst-kix_u0t1flar8n0h-2>li:before{content:"\0025a0  "}.lst-kix_u0t1flar8n0h-1>li:before{content:"\0025cb  "}.lst-kix_u0t1flar8n0h-0>li:before{content:"\0025cf  "}.lst-kix_x6j19jn7jsq1-7>li:before{content:"\0025cb  "}.lst-kix_x6j19jn7jsq1-6>li:before{content:"\0025cf  "}.lst-kix_x6j19jn7jsq1-5>li:before{content:"\0025a0  "}ul.lst-kix_x6j19jn7jsq1-0{list-style-type:none}ul.lst-kix_x6j19jn7jsq1-2{list-style-type:none}.lst-kix_x6j19jn7jsq1-3>li:before{content:"\0025cf  "}ul.lst-kix_x6j19jn7jsq1-1{list-style-type:none}.lst-kix_x6j19jn7jsq1-2>li:before{content:"\0025a0  "}.lst-kix_x6j19jn7jsq1-4>li:before{content:"\0025cb  "}ul.lst-kix_x6j19jn7jsq1-4{list-style-type:none}ul.lst-kix_x6j19jn7jsq1-3{list-style-type:none}ul.lst-kix_x6j19jn7jsq1-6{list-style-type:none}ul.lst-kix_x6j19jn7jsq1-5{list-style-type:none}ul.lst-kix_x6j19jn7jsq1-8{list-style-type:none}ul.lst-kix_x6j19jn7jsq1-7{list-style-type:none}.lst-kix_czoak3cjx1nv-0>li:before{content:"\0025cf  "}.lst-kix_x6j19jn7jsq1-0>li:before{content:"\0025cf  "}.lst-kix_czoak3cjx1nv-1>li:before{content:"\0025cb  "}.lst-kix_x6j19jn7jsq1-1>li:before{content:"\0025cb  "}ol{margin:0;padding:0}table td,table th{padding:0}.c27{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;background-color:#efefef;border-left-style:solid;border-bottom-width:1pt;width:72.8pt;border-top-color:#000000;border-bottom-style:solid}.c26{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;background-color:#efefef;border-left-style:solid;border-bottom-width:1pt;width:100.5pt;border-top-color:#000000;border-bottom-style:solid}.c16{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;background-color:#efefef;border-left-style:solid;border-bottom-width:1pt;width:113.2pt;border-top-color:#000000;border-bottom-style:solid}.c42{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;background-color:#efefef;border-left-style:solid;border-bottom-width:1pt;width:145.5pt;border-top-color:#000000;border-bottom-style:solid}.c49{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:156pt;border-top-color:#000000;border-bottom-style:solid}.c20{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:147pt;border-top-color:#000000;border-bottom-style:solid}.c25{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:451.4pt;border-top-color:#000000;border-bottom-style:solid}.c6{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:220.7pt;border-top-color:#000000;border-bottom-style:solid}.c48{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:113.2pt;border-top-color:#000000;border-bottom-style:solid}.c2{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:112.2pt;border-top-color:#000000;border-bottom-style:solid}.c29{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:141pt;border-top-color:#000000;border-bottom-style:solid}.c28{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:225.7pt;border-top-color:#000000;border-bottom-style:solid}.c63{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:145.5pt;border-top-color:#000000;border-bottom-style:solid}.c22{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:102pt;border-top-color:#000000;border-bottom-style:solid}.c44{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:198pt;border-top-color:#000000;border-bottom-style:solid}.c43{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:72.8pt;border-top-color:#000000;border-bottom-style:solid}.c39{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:63.8pt;border-top-color:#000000;border-bottom-style:solid}.c36{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:100.5pt;border-top-color:#000000;border-bottom-style:solid}.c58{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:148.9pt;border-top-color:#000000;border-bottom-style:solid}.c53{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:375.8pt;border-top-color:#000000;border-bottom-style:solid}.c35{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:224.2pt;border-top-color:#000000;border-bottom-style:solid}.c23{padding-top:18pt;padding-bottom:6pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c19{color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c33{padding-top:18pt;padding-bottom:6pt;line-height:1.0;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c30{padding-top:20pt;padding-bottom:6pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c11{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:20pt;font-family:"Arial";font-style:normal}.c59{color:#d4d4d4;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:"Courier New";font-style:normal}.c34{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:26pt;font-family:"Arial";font-style:normal}.c31{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:italic}.c0{color:#0f0001;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11.5pt;font-family:"Arial";font-style:normal}.c24{color:#0f0001;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:11.5pt;font-family:"Arial";font-style:normal}.c46{padding-top:16pt;padding-bottom:4pt;line-height:1.0;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c7{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c15{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:18pt;font-family:"Arial";font-style:normal}.c60{color:#434343;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:"Arial";font-style:normal}.c14{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:"Arial";font-style:normal}.c4{color:#274e13;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c61{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:right}.c13{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c45{color:#660099;font-weight:400;text-decoration:underline;vertical-align:baseline;font-family:"Arial";font-style:normal}.c1{padding-top:0pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c18{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:center}.c62{font-weight:400;text-decoration:none;vertical-align:baseline;font-family:"Arial";font-style:italic}.c56{padding-top:0pt;padding-bottom:3pt;line-height:1.15;page-break-after:avoid;text-align:center}.c21{border-spacing:0;border-collapse:collapse;margin-right:auto}.c3{padding-top:0pt;padding-bottom:0pt;line-height:1.0;text-align:left}.c12{padding-top:0pt;padding-bottom:0pt;line-height:1.0;text-align:center}.c40{background-color:#ffffff;max-width:451.4pt;padding:72pt 72pt 72pt 72pt}.c10{color:inherit;text-decoration:inherit}.c17{color:#1155cc;text-decoration:underline}.c38{padding:0;margin:0}.c50{color:#0f0001;font-size:11.5pt}.c55{color:#0f0001;font-size:18pt}.c37{margin-left:36pt;padding-left:0pt}.c57{margin-left:72pt;padding-left:0pt}.c41{height:22pt}.c32{font-size:11pt}.c47{background-color:#efefef}.c8{height:11pt}.c54{color:#274e13}.c9{color:#980000}.c5{height:0pt}.c52{height:24pt}.c51{height:23pt}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c40"><p class="c56 title" id="h.fuzukkt5lvgt"><span class="c34">Operating System &#20316;&#26989;&#31995;&#32113; HW1</span></p><p class="c61"><span class="c7">Due date: 10/16</span></p><a id="t.cbda8a614ea8c5e206551aff5d5062f913ac8764"></a><a id="t.0"></a><table class="c21"><tbody><tr class="c5"><td class="c28" colspan="1" rowspan="1"><p class="c18"><span class="c7">&#23416;&#34399;</span></p></td><td class="c28" colspan="1" rowspan="1"><p class="c18"><span class="c7">&#22995;&#21517;</span></p></td></tr><tr class="c5"><td class="c28" colspan="1" rowspan="1"><p class="c18"><span class="c7">o100442</span></p></td><td class="c28" colspan="1" rowspan="1"><p class="c18"><span class="c7">&#24464;&#29010;&#21729;</span></p></td></tr></tbody></table><p class="c8 c13"><span class="c7"></span></p><p class="c13 c8"><span class="c7"></span></p><a id="t.503e3bcb8987457e683ae1d74444681101d11306"></a><a id="t.1"></a><table class="c21"><tbody><tr class="c52"><td class="c25" colspan="1" rowspan="1"><p class="c13"><span class="c24">&#20316;&#26989;&#31684;&#22285;</span></p></td></tr><tr class="c5"><td class="c25" colspan="1" rowspan="1"><ul class="c38 lst-kix_x6j19jn7jsq1-0 start"><li class="c13 c37"><span class="c0">&#38646;&#12289;&#19968;&#31456;&#31680;&#27599;&#20301;&#21516;&#23416;&#37117;&#38656;&#35201;&#38321;&#35712;&#65288;&#23526;&#20316;&#31243;&#24335;&#26371;&#29992;&#21040;&#65289;</span></li><li class="c13 c37"><span class="c0">&#20108;&#65374;&#20845;&#31456;&#31680;&#27599;&#20301;&#21516;&#23416;&#25361;&#19968;&#31456;&#31680;&#35069;&#20316;&#22577;&#21578;&#65288;&#20027;&#35201;&#20839;&#23481;&#65289;</span></li></ul><p class="c13"><span class="c50">&#35387;&#35352;:https://hackmd.io/CYQwHGCMkJwKwFpgwMwHYEBYBsBjDMAZgKaEKQBGa+ukYADGnLkA</span></p></td></tr><tr class="c5"><td class="c25" colspan="1" rowspan="1"><p class="c13"><span class="c24">&#22577;&#21578;&#20839;&#23481;</span></p></td></tr><tr class="c5"><td class="c25" colspan="1" rowspan="1"><ul class="c38 lst-kix_u0t1flar8n0h-0 start"><li class="c13 c37"><span class="c0">&#35498;&#26126;&#36939;&#20316;&#21407;&#29702;</span></li><li class="c13 c37"><span class="c50">&#31243;&#24335;&#27969;&#31243;&#21450;&#36039;&#26009;&#32080;&#27083;&#65288;&#35387;&#26126;&#21738;&#19968;&#20491;&#27284;&#26696;&#20839;&#30340;functions&#12289;&#31243;&#24335;&#35041;&#38754;&#25152;&#20351;&#29992;&#21040;&#21738;&#20123;&#35722;&#25976;&#21450;&#32080;&#27083;&#65289;</span></li></ul></td></tr><tr class="c5"><td class="c25" colspan="1" rowspan="1"><p class="c13"><span class="c24">&#20316;&#26989;&#20839;&#23481;</span></p></td></tr><tr class="c5"><td class="c25" colspan="1" rowspan="1"><h1 class="c30" id="h.2vi2us9cd0c"><span class="c15">Ch0 - Operating system interfaces &#31777;&#20171; </span></h1><h1 class="c30" id="h.4eeg9jpemas6"><span class="c50 c62">page 7</span></h1><p class="c13"><span class="c0">&#25552;&#20379;&#19968;&#20491;&#20351;&#29992;&#32773;&#33021;&#22816;&#36879;&#36942; OS &#20351;&#29992;&#30828;&#39636;&#30340;&#25805;&#20316;&#20171;&#38754;&#65292;&#20134;&#21363;&#26159;&#36879;&#36942;&#22312;&#20351;&#29992;&#32773;&#31354;&#38291;&#30340;&#19968;&#25903;&#31243;&#24335;(user program)&#65292;&#21483;&#20316; shell&#65292;&#19979; system call &#25351;&#20196;&#65292;&#20351;&#29992; OS Kernel &#35519;&#29992;&#30828;&#39636;&#36039;&#28304;&#12290;</span></p><p class="c13 c8"><span class="c0"></span></p><p class="c13"><span class="c0">&#20171;&#38754;&#35373;&#35336;&#19978;&#27169;&#20223; Unix &#30340;OS</span></p><p class="c13 c8"><span class="c0"></span></p><p class="c18"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 271.00px; height: 87.53px;"><img alt="&#34722;&#24149;&#24555;&#29031; 2017-10-03 &#19979;&#21320;4.23.47.png" src="images/image3.png" style="width: 271.00px; height: 87.53px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span><span class="c0">&nbsp;</span></p><p class="c18"><span class="c0">&#22294;&#19968;&#12289;&#20171;&#38754;&#35373;&#35336;</span></p><p class="c13 c8"><span class="c0"></span></p><p class="c18"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 350.20px; height: 289.50px;"><img alt="&#34722;&#24149;&#24555;&#29031; 2017-10-03 &#19979;&#21320;4.44.13.png" src="images/image2.png" style="width: 350.20px; height: 289.50px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c18"><span class="c0">&#22294;&#20108;&#12289;xv6 &#30340; system call &#25972;&#29702;</span></p><p class="c18 c8"><span class="c0"></span></p><p class="c13"><span class="c0">&#22294;&#20108;&#25353;&#29031;&#21151;&#33021;&#20998;&#21029;&#31777;&#20171; xv6 &#30340;&#21508;&#38917;&#21151;&#33021;&#65292;&#28165;&#26970;&#26131;&#25026;</span></p><h1 class="c30" id="h.gdq8n9p1z7xc"><span class="c55">Ch1 - </span><span class="c15">The first process &#31777;&#20171; </span></h1><p class="c1"><span class="c31">page 17</span></p><p class="c1 c8"><span class="c7"></span></p><p class="c1"><span class="c7">&#36879;&#36942;&#21628;&#21483; userinit()&#65292;&#20415;&#33021;&#22816;&#21109;&#36896;&#19968;&#20491; process&#12290; </span></p><p class="c1 c8"><span class="c7"></span></p><p class="c1"><span class="c7">&#23427;&#26371;&#20808;&#21628;&#21483; allocproc &#65292;&#37197;&#32622;&#19968;&#20491; struct proc&#65292;&#20006;&#19988;&#23559;&#23427;&#21021;&#22987;&#21270;&#12290; &#25509;&#19979;&#20358;&#26032;process &#30340; kernel thread &#26371;&#22312; forkret &#19978;&#22519;&#34892;&#65292;&#20877;&#21040; trapret</span></p><p class="c1 c8"><span class="c7"></span></p><p class="c1"><span class="c7">&#36889;&#20491;&#36942;&#31243;&#37117;&#22312; allocproc() &#20013;&#23450;&#32681;&#24471;&#24456;&#28165;&#26970;</span></p><h2 class="c23" id="h.t8ob70lp3dwk"><span class="c14">Processes and memory</span></h2><p class="c1"><span class="c7">&#33287; Ch1 &#26377;&#30456;&#38364;&#65292;&#22240;&#27492;&#24478;Ch0 &#31227;&#21205;&#21040;&#27492;</span></p><p class="c13 c8"><span class="c0"></span></p><a id="t.f5ed9cdee5b4250baf2da28bb6445af597bf44f6"></a><a id="t.2"></a><table class="c21"><tbody><tr class="c5"><td class="c39" colspan="1" rowspan="1"><p class="c13"><span class="c0">process</span></p></td><td class="c53" colspan="1" rowspan="1"><p class="c13"><span class="c0">1. &#19968;&#20491; &nbsp;process &#30456;&#30070;&#26044;&#19968;&#25903;&#31243;&#24335;&#65292;process&#21487;&#20197;&#25286;&#25104;&#25976;&#20491;thread&#65292;&#32780; thread &#25165;&#26159;&#23526;&#38555;&#22312; CPU &#26680;&#24515;&#19978;&#36939;&#34892;&#30340;&#31243;&#24207;&#12290;</span></p><p class="c13 c8"><span class="c0"></span></p><p class="c13"><span class="c0">2. &#21487;&#20197;&#36879;&#36942; &nbsp;fork() &#36889;&#20491; system call &#23559; process &#36914;&#34892;&#35079;&#35069;&#65292;&#23427;&#26371;&#22238;&#20659; parent &#33287; child &nbsp;&#30340;pid</span></p><ul class="c38 lst-kix_czoak3cjx1nv-0 start"><li class="c13 c57"><span class="c0">&#22312; parent&#65292;&#23427;&#26371;&#22238;&#20659; child &nbsp;&#30340;pid</span></li><li class="c13 c57"><span class="c0">&#22312; child&#65292;&#23427;&#26371;&#22238;&#20659; 0 (zero)</span></li></ul></td></tr><tr class="c5"><td class="c39" colspan="1" rowspan="1"><p class="c3"><span class="c0">memory</span></p></td><td class="c53" colspan="1" rowspan="1"><p class="c13"><span class="c0">process &nbsp;&#19981;&#22519;&#34892;&#30340;&#26178;&#20505;&#65292; xv6 &#26371;&#20786;&#23384; CPU &#26283;&#23384;&#22120;&#30340;&#36039;&#35338;</span></p></td></tr></tbody></table><p class="c13 c8"><span class="c7"></span></p><p class="c3 c8"><span class="c7"></span></p><p class="c3"><span class="c7">xv6 &#20197;&#36039;&#26009;&#32080;&#27083; struct proc &#20358;&#20445;&#23384; process &#30340;&#29376;&#24907;&#65292;&#20063;&#26371;&#28858;&#27599;&#20491; process &#20445;&#23384;&#19981;&#21516;&#30340;page table&#65292;&#22240;&#27492;&#21487;&#20197;&#21512;&#29702;&#22320;&#23450;&#32681; process &#30340;&#20301;&#22336;&#31354;&#38291;( address space )&#65292;&#36889;&#37002;&#30340;&#20301;&#22336;&#31354;&#38291;&#27010;&#24565; &#33287;&#35336;&#31639;&#27231;&#32068;&#32340;&#20013;&#30340;&#27010;&#24565;&#19968;&#27171;&#12290;</span></p><p class="c3 c8"><span class="c7"></span></p><p class="c3"><span class="c7">p-&gt;state &#21063;&#26159;&#32000;&#37636;&#20102; process &#30340;&#29376;&#24907;&#65292;&#20998;&#25104; allocated, ready to run, running, waiting for I/O, or exiting &#25976;&#31278;&#29376;&#24907;&#12290; </span></p><p class="c3 c8"><span class="c7"></span></p><p class="c3"><span class="c7">&#38364;&#26044;&#23526;&#20316;&#30340;&#37096;&#20221;&#65292;&#25972;&#29702;&#22914;&#19979;:</span></p><h1 class="c30" id="h.ns6m5e34tqer"><span class="c11">&#23526;&#20316;&#20998;&#26512;</span></h1><h2 class="c33" id="h.uvzr03h53fas"><span class="c14">Proccess &#23526;&#20316;&#25972;&#29702;</span></h2><p class="c1 c8"><span class="c7"></span></p><a id="t.37fd6ddef74502a93577b9fe3973b5b4da25e96e"></a><a id="t.3"></a><table class="c21"><tbody><tr class="c41"><td class="c26" colspan="1" rowspan="1"><p class="c12"><span class="c7">&#27010;&#24565;</span></p></td><td class="c29 c47" colspan="1" rowspan="1"><p class="c12"><span class="c7">&#31243;&#24335;&#30908;&#23526;&#20316;</span></p></td><td class="c44 c47" colspan="1" rowspan="1"><p class="c12"><span class="c7">&#35498;&#26126;</span></p></td></tr><tr class="c5"><td class="c36" colspan="1" rowspan="1"><p class="c3"><span class="c7">&#37197;&#32622;&#31532;&#19968;&#20491; user process</span></p></td><td class="c29" colspan="1" rowspan="1"><p class="c3"><span>proc.c &#30340; </span><span class="c17"><a class="c10" href="https://www.google.com/url?q=https://github.com/wei-yuan/xv6-public/blob/master/proc.c%23L120&amp;sa=D&amp;ust=1508162753895000&amp;usg=AFQjCNGzZtOM0R7WZ-zng_wGeUb5V3Nwag">userinit()</a></span><span class="c7">&nbsp;</span></p></td><td class="c44" colspan="1" rowspan="1"><p class="c3"><span class="c7">void userinit(void){</span></p><p class="c3"><span class="c7">&nbsp; &nbsp; struct proc *p;</span></p><p class="c3"><span class="c7">&nbsp; &nbsp; &hellip;</span></p><p class="c3"><span>&nbsp; &nbsp; p = </span><span class="c9">allocproc</span><span class="c7">();</span></p><p class="c3"><span class="c7">&nbsp; &nbsp; &hellip;.</span></p><p class="c3"><span class="c7">}</span></p><p class="c3 c8"><span class="c7"></span></p><p class="c3"><span class="c7">userinit() &#20013;&#26371;&#36879;&#36942; allocproc()&#65292;&#22312; process &#30340;&#32000;&#37636;&#34920;&#20013;&#25214;&#21040;&#19968;&#20491; UNUSED &#30340;&#20301;&#32622;&#65292;&#22312;&#35442;&#20301;&#32622;&#37197;&#32622;(allocate)&#19968;&#20491; proc &#32080;&#27083;</span></p></td></tr><tr class="c5"><td class="c36" colspan="1" rowspan="1"><p class="c3 c8"><span class="c7"></span></p></td><td class="c29" colspan="1" rowspan="1"><p class="c3"><span>proc.c &#30340; </span><span class="c17"><a class="c10" href="https://www.google.com/url?q=https://github.com/wei-yuan/xv6-public/blob/master/proc.c%23L73&amp;sa=D&amp;ust=1508162753898000&amp;usg=AFQjCNFqRceDatI-TkV5Xrkt6zCJ5fxOcA">allocproc()</a></span></p></td><td class="c44" colspan="1" rowspan="1"><p class="c3"><span class="c7">static struct proc* allocproc(void){</span></p><p class="c3"><span class="c7">&nbsp; &nbsp; &hellip;</span></p><p class="c3"><span class="c7">found:</span></p><p class="c3"><span class="c7">&nbsp; &nbsp; p-&gt;state = EMBRYO; </span></p><p class="c3"><span class="c7">&nbsp; &nbsp; p-&gt;pid = nextpid++;</span></p><p class="c3"><span class="c7">&nbsp; &nbsp; &hellip;</span></p><p class="c3"><span>&nbsp; &nbsp; </span><span class="c4">//&#37197;&#32622; kernel stack &nbsp; &nbsp;</span></p><p class="c3 c8"><span class="c4"></span></p><p class="c3"><span>&nbsp; &nbsp; </span><span class="c4">//&#22312;forkret&#37197;&#32622;&#26032; context&#20006;&#38283;&#22987;&#22519;&#34892;</span></p><p class="c3"><span class="c4">&nbsp; &nbsp; //&#21516;&#26178;&#22238;&#20659;&#32102;trapret() </span></p><p class="c3"><span class="c7">}</span></p><p class="c3 c8"><span class="c7"></span></p><p class="c3"><span class="c7">&#23559; process &#30340;&#29376;&#24907;&#24478; UNUSED &#25913;&#25104;EMBRYO&#65292;&#21516;&#26178;pid&#25976;&#37327;+1&#65292;&#23436;&#25104;&#22522;&#26412;&#37197;&#32622;&#12290; &#25509;&#19979;&#20358;&#20877;&#37197;&#32622;process&#35442;&#26377;&#30340; context&#12290;</span></p><p class="c3 c8"><span class="c7"></span></p><p class="c3"><span class="c7">&#21021;&#22987;&#21270;&#23436;&#30050;&#20043;&#24460;&#65292; process &#30340;&#29376;&#24907;&#25165;&#25913;&#25104; RUNNABLE&#12290;</span></p></td></tr></tbody></table><p class="c1 c8"><span class="c7"></span></p><h1 class="c30" id="h.z43n5e41rpei"><span class="c15">Ch4 &nbsp;- Scheduling</span></h1><p class="c13"><span class="c62 c50">page 61</span></p><h2 class="c23" id="h.v71hmll6ushl"><span class="c14">CPU&nbsp; Scheduler</span></h2><p class="c13"><span class="c0">Scheduler &#36000;&#36012;&#25490;&#31243;&#30340;&#24037;&#20316;&#12290;&#34987;&#31281;&#28858; Short - Term Scheduler&#65292;&#25490;&#24037;&#20316;&#38750;&#24120;&#38971;&#32321;</span></p><h2 class="c23" id="h.6wuzm858ym0d"><span class="c14">job Scheduler</span></h2><p class="c13"><span class="c0">&#34987;&#31281;&#28858; Long - Term Scheduler&#65292;&#19968;&#20491; process &#21482;&#26371;&#34987; job Scheduler &#25490;&#36914;&#20358;&#19968;&#27425;</span></p><h2 class="c23" id="h.c33rw3sof4jr"><span class="c14">Preemptive vs Non-repreemptive</span></h2><p class="c18"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 366.00px; height: 144.75px;"><img alt="" src="images/image1.png" style="width: 366.00px; height: 144.75px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c18"><span class="c0">&#22294;&#12289;Process &#29376;&#24907;&#22294;</span></p><p class="c13 c8"><span class="c0"></span></p><p class="c13"><span class="c0">preemptive &#25351;&#24471;&#26159;&#21487;&#20197;&#34987;&#20013;&#26039;&#30340;&#31243;&#24207;&#65292;&#21453;&#20043; Non-preemptive &#21063;&#26159;&#19981;&#33021;&#34987;&#20013;&#26039;&#22519;&#34892;&#12290; </span></p><a id="t.dc2f7cedbba800ed117d3e9baec2dfafcbf900ac"></a><a id="t.4"></a><table class="c21"><tbody><tr class="c51"><td class="c2 c47" colspan="1" rowspan="1"><p class="c18"><span class="c0">CPU scheduling &nbsp;&#30332;&#29983;&#30340;&#26178;&#27231;&#25972;&#29702;</span></p></td><td class="c47 c49" colspan="1" rowspan="1"><p class="c12"><span class="c0">&#35498;&#26126;</span></p></td><td class="c27" colspan="1" rowspan="1"><p class="c12"><span class="c0">preemptive</span></p></td><td class="c26" colspan="1" rowspan="1"><p class="c12"><span class="c0">Non-preemptive</span></p></td></tr><tr class="c51"><td class="c2" colspan="1" rowspan="1"><p class="c12"><span class="c0">running -&gt; waiting state</span></p></td><td class="c49" colspan="1" rowspan="1"><p class="c3"><span class="c0">Timer &#21855;&#21205;&#20316;&#29992;&#65292;&#26178;&#38291;&#21040;&#23601;&#25226;&#22519;&#34892;&#30340;&#31243;&#24207;&#36245;&#20986;&#21435;</span></p></td><td class="c43" colspan="1" rowspan="1"><p class="c12"><span class="c0">V</span></p></td><td class="c36" colspan="1" rowspan="1"><p class="c12"><span class="c0">V</span></p></td></tr><tr class="c41"><td class="c2" colspan="1" rowspan="1"><p class="c12"><span class="c0">running -&gt; ready state</span></p></td><td class="c49" colspan="1" rowspan="1"><p class="c3"><span class="c0">&#36889;&#20491;&#31243;&#24207;&#24456;&#37325;&#35201;&#65292;&#25509;&#32396;&#25490;&#22312;&#22519;&#34892;&#30340;&#25490;&#31243;&#20013;</span></p></td><td class="c43" colspan="1" rowspan="1"><p class="c12"><span class="c0">V</span></p></td><td class="c36" colspan="1" rowspan="1"><p class="c12 c8"><span class="c0"></span></p></td></tr><tr class="c5"><td class="c2" colspan="1" rowspan="1"><p class="c12"><span class="c0">waiting -&gt; ready state</span></p></td><td class="c49" colspan="1" rowspan="1"><p class="c3"><span class="c0">&#33287; running -&gt; ready state</span></p></td><td class="c43" colspan="1" rowspan="1"><p class="c12"><span class="c0">V</span></p></td><td class="c36" colspan="1" rowspan="1"><p class="c12 c8"><span class="c0"></span></p></td></tr><tr class="c5"><td class="c2" colspan="1" rowspan="1"><p class="c12"><span class="c0">Terminates</span></p></td><td class="c49" colspan="1" rowspan="1"><p class="c3"><span class="c0">&#31243;&#24207;&#32080;&#26463;&#65292;&#30070;&#28982;&#23601;&#21487;&#20197;&#20013;&#26039;&#23427;</span></p></td><td class="c43" colspan="1" rowspan="1"><p class="c12"><span class="c0">V</span></p></td><td class="c36" colspan="1" rowspan="1"><p class="c12"><span class="c0">V</span></p></td></tr></tbody></table><p class="c13 c8"><span class="c0"></span></p><p class="c13 c8"><span class="c0"></span></p><a id="t.43c3f9f88f423dc189acbf59fbe2c2ad31bae48f"></a><a id="t.5"></a><table class="c21"><tbody><tr class="c5"><td class="c20 c47" colspan="1" rowspan="1"><p class="c12 c8"><span class="c0"></span></p></td><td class="c42" colspan="1" rowspan="1"><p class="c3"><span class="c0">&#20778;&#40670;</span></p></td><td class="c58 c47" colspan="1" rowspan="1"><p class="c3"><span class="c0">&#32570;&#40670;</span></p></td></tr><tr class="c5"><td class="c20" colspan="1" rowspan="1"><p class="c12"><span class="c0">preemptive</span></p></td><td class="c63" colspan="1" rowspan="1"><p class="c3"><span class="c0">&#22240;&#28858;preemptive &#30340; scheduler &#25490;&#31243;&#30340;&#26178;&#27231;&#40670;&#26377;4&#20491;&#65292;&#22240;&#27492;&#36890;&#24120;&#25928;&#33021;&#27604;&#36611;&#22909;</span></p></td><td class="c58" colspan="1" rowspan="1"><p class="c3"><span class="c0">&#19968;&#26086;&#34987;&#20013;&#26039;&#65292;&#29376;&#24907;&#23601;&#26371;&#19981;&#36899;&#32396;&#12290;&#22240;&#27492;&#38656;&#35201;&#27880;&#24847;&#24590;&#40636;&#35731; Process &#21516;&#27493;&#19981;&#26371;&#20986;&#37679;&#12290; Unix&#28858;&#20102;&#25033;&#23565;&#36889;&#20491;&#21839;&#38988;&#65292;&#22312;&#26576;&#20123;&#24773;&#27841;&#19979;&#65292;&#25226; interrupt &#21151;&#33021;&#38364;&#38281;&#65292;&#35731;&#31243;&#24335;&#32380;&#32396;&#22519;&#34892;&#30452;&#21040;&#32080;&#26463;&#12290;</span></p></td></tr></tbody></table><p class="c13 c8"><span class="c0"></span></p><p class="c1 c8"><span class="c7"></span></p><p class="c1"><span>process &#22914;&#26524;&#35201;&#35731;&#20986; CPU &#36039;&#28304;&#65292;&#22312;xv6&#30070;&#20013;&#38656;&#35201;&#21462;&#24471; process &#34920;&#30340;&#37782; ptable.lock&#65292;&#20006;&#19988;&#37323;&#25918;&#20854;&#25793;&#26377;&#30340;&#20854;&#20182;&#37782;&#65292;&#21516;&#26178;&#20462;&#25913; proc-&gt;state&#65292;&#20006;&#21628;&#21483; sched()</span></p><h2 class="c23" id="h.z1f44lsju89"><span class="c14">wait</span></h2><p class="c13"><span class="c7">ptable.lock</span></p><h2 class="c23" id="h.88eo96jwarwk"><span class="c14">Scheduling Algorithm</span></h2><p class="c13"><span class="c50">xv6 &#23526;&#38555;&#30340;&#25490;&#31243;&#28436;&#31639;&#27861;&#21482;&#26159;&#21934;&#32020;&#30340; Round Robin Scheduling&#65292;&#23450;&#32681;&#22312;</span><span>proc.c &#30340; schduler() &#20989;&#24335;&#30340; for &#36852;&#22280;&#20013;</span><span class="c0">&#12290;&#36890;&#24120;&#26159;&#31561;&#19968;&#20491; process &#33021;&#22816;&#20351;&#29992;&#30340;&#26178;&#25976;&#24050;&#32147;&#29992;&#23436;&#20102;&#65292;&#23601;&#25563;&#19979;&#19968;&#20491; process &#65292;&#22914;&#19979;&#22294;&#25152;&#31034;&#12290; </span></p><p class="c13 c8"><span class="c0"></span></p><a id="t.f727949b760321cc972232d42b2d9fa1f8785d82"></a><a id="t.6"></a><table class="c21"><tbody><tr class="c5"><td class="c6" colspan="1" rowspan="1"><p class="c18"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 211.00px; height: 212.23px;"><img alt="" src="images/image5.png" style="width: 211.00px; height: 212.23px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td><td class="c6" colspan="1" rowspan="1"><p class="c18"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 260.00px; height: 225.49px;"><img alt="" src="images/image4.png" style="width: 260.00px; height: 225.49px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td></tr></tbody></table><p class="c18"><span class="c0">&#22294;&#12289;round robin scheduling</span></p><p class="c13 c8"><span class="c0"></span></p><h1 class="c30" id="h.15z3rvi9fsfd"><span class="c11">&#23526;&#20316;&#20998;&#26512;</span></h1><h2 class="c33" id="h.lay6rqoutelq"><span class="c14">Scheduling&#23526;&#20316;&#25972;&#29702;</span></h2><p class="c1 c8"><span class="c7"></span></p><a id="t.8e8b0192dba9236a8e73b9bd7506363daf067855"></a><a id="t.7"></a><table class="c21"><tbody><tr class="c5"><td class="c22 c47" colspan="1" rowspan="1"><p class="c12"><span class="c7">&#27010;&#24565;</span></p></td><td class="c16" colspan="1" rowspan="1"><p class="c12"><span class="c7">&#31243;&#24335;&#30908;&#23526;&#20316;</span></p></td><td class="c35 c47" colspan="1" rowspan="1"><p class="c12"><span class="c7">&#35498;&#26126;</span></p></td></tr><tr class="c5"><td class="c22" colspan="1" rowspan="1"><p class="c3"><span class="c7">Context switching</span></p></td><td class="c48" colspan="1" rowspan="1"><p class="c3"><span class="c17"><a class="c10" href="https://www.google.com/url?q=https://github.com/mit-pdos/xv6-public/blob/master/swtch.S&amp;sa=D&amp;ust=1508162753922000&amp;usg=AFQjCNHzMRqEivPvAf2kJCIA-b2DWFp8rg">swtch.s</a></span></p><p class="c3"><span class="c7">(.s &#26159;&#20197;&#32068;&#21512;&#35486;&#35328;&#23526;&#20316;&#30340;&#31243;&#24335;&#27284;&#26696;)</span></p></td><td class="c35" colspan="1" rowspan="1"><p class="c3"><span class="c7">void swtch(struct context **old, struct context *new);</span></p><p class="c3 c8"><span class="c7"></span></p><p class="c3"><span class="c7">swtch &#21482;&#21934;&#32020;&#36000;&#36012;&#20445;&#23384;&#33287;&#22238;&#35206;&#26283;&#23384;&#22120;&#20839;&#30340;&#36039;&#26009;(&#20063;&#23601;&#26159;context)&#12290; &#30070;&#38656;&#35201;&#20999;&#25563;process&#30340;&#26178;&#20505;&#65292;&#23601;&#26371;&#21628;&#21483; swtch &#20358;&#34389;&#29702;&#36889;&#20214;&#20107;&#12290;</span></p><p class="c3 c8"><span class="c7"></span></p><p class="c3"><span class="c7">&#32068;&#35486;&#20013;&#65292; %esp &#21644; %eip &#30340;&#35722;&#25563;&#20195;&#34920; CPU &#26371;&#20999;&#25563;&#22519;&#34892;stack &#33287;&#22519;&#34892;&#31243;&#24335;</span></p></td></tr><tr class="c5"><td class="c22" colspan="1" rowspan="1"><p class="c3"><span class="c7">Context switching - 1</span></p></td><td class="c48" colspan="1" rowspan="1"><p class="c3"><span>proc.c &#30340; </span><span class="c17"><a class="c10" href="https://www.google.com/url?q=https://github.com/wei-yuan/xv6-public/blob/master/proc.c%23L365&amp;sa=D&amp;ust=1508162753929000&amp;usg=AFQjCNE2jeSvWXAd_YnmHGStNZBvCRddOw">Sched()</a></span><span class="c7">&nbsp;&#20989;&#24335;</span></p></td><td class="c35" colspan="1" rowspan="1"><p class="c3"><span class="c7">Context switching &#20013;&#30340;&#31532;&#19968;&#27493;:</span></p><p class="c3"><span class="c31">current process &rarr; scheduler</span></p><p class="c3 c8"><span class="c7"></span></p><p class="c3"><span class="c7">void sched(void) {</span></p><p class="c3"><span class="c7">&nbsp; &nbsp; ...</span></p><p class="c3"><span class="c7">&nbsp; &nbsp; if(!holding(&amp;ptable.lock)) &nbsp; &nbsp; </span></p><p class="c3"><span class="c7">&nbsp; &nbsp; &nbsp; &nbsp; panic(&quot;sched ptable.lock&quot;); </span></p><p class="c3"><span class="c7">&nbsp; &nbsp; if(mycpu()-&gt;ncli != 1) </span></p><p class="c3"><span class="c7">&nbsp; &nbsp; &nbsp; &nbsp; panic(&quot;sched locks&quot;); </span></p><p class="c3"><span class="c7">&nbsp; &nbsp; if(p-&gt;state == RUNNING) </span></p><p class="c3"><span class="c7">&nbsp; &nbsp; &nbsp; &nbsp; panic(&quot;sched running&quot;); &nbsp; &nbsp; </span></p><p class="c3"><span class="c7">&nbsp; &nbsp; if(readeflags()&amp;FL_IF) </span></p><p class="c3"><span class="c7">&nbsp; &nbsp; &nbsp; &nbsp; panic(&quot;sched interruptible&quot;);</span></p><p class="c3"><span class="c7">&nbsp; &nbsp; &hellip;</span></p><p class="c3"><span class="c7">&nbsp; &nbsp; swtch(&amp;p-&gt;context, mycpu()-&gt;scheduler);</span></p><p class="c3"><span class="c7">&nbsp; &nbsp; &hellip;</span></p><p class="c3"><span class="c7">}</span></p><p class="c3 c8"><span class="c7"></span></p><p class="c3"><span class="c7">ptable.lock &#20445;&#35657; process &#30340; state &#21644; context &#22312;&#22519;&#34892; swtch &#26178;&#20445;&#25345;&#19981;&#35722;&#12290;</span></p><p class="c3 c8"><span class="c7"></span></p><p class="c3"><span class="c7">sched() &#26371;&#27298;&#26597;&#26159;&#21542;&#26377;&#37782; ptable.lock &#30340;&#23384;&#22312;&#65292;&#20006;&#21628;&#21483; swtch() &#65292;&#23433;&#20840;&#30340;&#20999;&#25563; process &#30340;context&#65292;&#20043;&#24460;&#22312;&#20132;&#30001; cpu-&gt;scheduler &#25509;&#25163;&#65292;&#22914;&#19979;&#26041;&#31532;2&#27493;&#25152;&#31034;&#12290;</span></p></td></tr><tr class="c5"><td class="c22" colspan="1" rowspan="1"><p class="c3"><span class="c7">Context switching - 2</span></p></td><td class="c48" colspan="1" rowspan="1"><p class="c3"><span>proc.c &#30340; </span><span class="c17"><a class="c10" href="https://www.google.com/url?q=https://github.com/wei-yuan/xv6-public/blob/master/proc.c%23L323&amp;sa=D&amp;ust=1508162753940000&amp;usg=AFQjCNGVLYDqXPuo-h4CjLpyc5cUBWjBVA">schduler()</a></span><span class="c7">&nbsp;&#20989;&#24335;</span></p></td><td class="c35" colspan="1" rowspan="1"><p class="c3"><span>Context switching &#20013;&#30340;&#31532;&#20108;&#27493;:</span></p><p class="c3"><span class="c31">scheduler &rarr;the next process</span></p><p class="c3 c8"><span class="c7"></span></p><p class="c3"><span class="c7">void</span></p><p class="c3"><span class="c7">scheduler(void)</span></p><p class="c3"><span class="c7">{</span></p><p class="c3"><span class="c7">&nbsp; ... &nbsp;</span></p><p class="c3"><span class="c7">&nbsp; for(;;){</span></p><p class="c3"><span class="c7">&nbsp; &nbsp; ...</span></p><p class="c3"><span class="c7">&nbsp; &nbsp; // Loop over process table looking for process to run.</span></p><p class="c3"><span class="c7">&nbsp; &nbsp; acquire(&amp;ptable.lock);</span></p><p class="c3"><span class="c7">&nbsp; &nbsp; for(p = ptable.proc; p &lt; &amp;ptable.proc[NPROC]; p++){</span></p><p class="c3"><span class="c7">&nbsp; &nbsp; &nbsp; if(p-&gt;state != RUNNABLE)</span></p><p class="c3"><span class="c7">&nbsp; &nbsp; &nbsp; &nbsp; continue;</span></p><p class="c3 c8"><span class="c7"></span></p><p class="c3"><span class="c7">&nbsp; &nbsp; &nbsp; // Switch to chosen process. &nbsp;It is the process&#39;s job</span></p><p class="c3"><span class="c7">&nbsp; &nbsp; &nbsp; // to release ptable.lock and then reacquire it</span></p><p class="c3"><span class="c7">&nbsp; &nbsp; &nbsp; // before jumping back to us.</span></p><p class="c3"><span class="c7">&nbsp; &nbsp; &nbsp; ...</span></p><p class="c3"><span class="c7">&nbsp; &nbsp; &nbsp; switchuvm(p);</span></p><p class="c3"><span class="c7">&nbsp; &nbsp; &nbsp; p-&gt;state = RUNNING;</span></p><p class="c3 c8"><span class="c7"></span></p><p class="c3"><span class="c7">&nbsp; &nbsp; &nbsp; swtch(&amp;(c-&gt;scheduler), p-&gt;context);</span></p><p class="c3"><span class="c7">&nbsp; &nbsp; &nbsp; switchkvm();</span></p><p class="c3"><span class="c7">&nbsp; &nbsp; &nbsp; ...</span></p><p class="c3"><span class="c7">&nbsp; &nbsp; }</span></p><p class="c3"><span class="c7">&nbsp; &nbsp; release(&amp;ptable.lock);</span></p><p class="c3"><span class="c7">&nbsp; }</span></p><p class="c3"><span class="c7">}</span></p><p class="c3 c8"><span class="c7"></span></p><p class="c3"><span class="c7">Scheduler() &#25353;&#29031; round-robin scheduling &#28436;&#31639;&#27861;&#22519;&#34892; process&#12290;&#22519;&#34892;&#36852;&#22280;&#30340;&#36942;&#31243;&#20013;&#65292;&#25214;&#36941;&#25972;&#20491; page table &#20358;&#36984;&#25799;&#19968;&#20491;&#21487;&#20197;&#22519;&#34892;&#30340; process&#65292;&#30452;&#21040;&#25214;&#21040;&#21487;&#20197;&#22519;&#34892;&#30340;process&#28858;&#27490; (&#20063;&#23601;&#26159;p-&gt;state&#30070;&#19979;&#28858; RUNNABLE&#30340;process)&#12290;</span></p><p class="c3 c8"><span class="c7"></span></p><p class="c3"><span class="c7">&#26681;&#25818;&#26178;&#38291;&#20013;&#26039;&#30340; yield()</span></p></td></tr><tr class="c5"><td class="c22" colspan="1" rowspan="1"><p class="c3"><span class="c7">process &#20132;&#25563;&#27231;&#21046; - 1</span></p></td><td class="c48" colspan="1" rowspan="1"><p class="c3"><span>proc.c &#30340; </span><span class="c17"><a class="c10" href="https://www.google.com/url?q=https://github.com/wei-yuan/xv6-public/blob/master/proc.c%23L417&amp;sa=D&amp;ust=1508162753950000&amp;usg=AFQjCNHbIf4bNgFEXO7pHLmIX65GbIbXyw">sleep()</a></span></p></td><td class="c35" colspan="1" rowspan="1"><p class="c1"><span class="c7">void</span></p><p class="c1"><span class="c7">sleep(void *chan, struct spinlock *lk)</span></p><p class="c1"><span class="c7">{</span></p><p class="c1"><span class="c7">&nbsp; &nbsp; struct proc *p = myproc();</span></p><p class="c1"><span class="c7">&nbsp; &nbsp; if(p == 0)</span></p><p class="c1"><span class="c7">&nbsp; &nbsp; &nbsp; &nbsp;panic(&quot;sleep&quot;);</span></p><p class="c1 c8"><span class="c7"></span></p><p class="c1"><span class="c7">&nbsp; &nbsp; &nbsp;if(lk == 0)</span></p><p class="c1"><span class="c7">&nbsp; &nbsp; &nbsp; &nbsp;panic(&quot;sleep without lk&quot;);</span></p><p class="c1"><span>&nbsp; &nbsp; </span><span class="c54">// wakeu</span><span class="c54">p </span></p><p class="c1"><span class="c7">&nbsp; &nbsp; if(lk != &amp;ptable.lock){ &nbsp;//DOC: sleeplock0</span></p><p class="c1"><span class="c7">&nbsp; &nbsp; &nbsp; acquire(&amp;ptable.lock); &nbsp;//DOC: sleeplock1</span></p><p class="c1"><span class="c7">&nbsp; &nbsp; &nbsp; release(lk);</span></p><p class="c1"><span class="c7">&nbsp; &nbsp; }</span></p><p class="c1"><span>&nbsp; &nbsp; </span><span class="c4">// Go to sleep.</span></p><p class="c1"><span class="c7">&nbsp; &nbsp; ...</span></p><p class="c1"><span class="c7">&nbsp; &nbsp; p-&gt;state = SLEEPING;</span></p><p class="c1"><span class="c7">&nbsp; &nbsp; sched(); // &#25490;&#31243;!</span></p><p class="c1"><span>&nbsp; &nbsp; </span><span>...</span><span class="c7">.</span></p><p class="c1"><span>&nbsp; &nbsp; </span><span class="c4">// Reacquire original lock.</span></p><p class="c1"><span>&nbsp; &nbsp; &nbsp;if(lk != &amp;ptable.lock){ &nbsp;</span><span class="c4">//DOC: sleeplock2</span></p><p class="c1"><span class="c7">&nbsp; &nbsp; &nbsp; &nbsp;release(&amp;ptable.lock); </span></p><p class="c1"><span class="c7">&nbsp; &nbsp; &nbsp; &nbsp;acquire(lk);</span></p><p class="c1"><span class="c7">&nbsp; &nbsp; &nbsp;}</span></p><p class="c1"><span class="c7">}</span></p><p class="c1 c8"><span class="c7"></span></p><p class="c1"><span class="c7">&#28858;&#20102;&#35731;&#25490;&#31243;&#26356;&#21152;&#26377;&#25928;&#65292;&#32771;&#24942;&#29983;&#29986;&#32773;&#33287;&#28040;&#36027;&#32773;&#30340; process &#28317;&#36890;&#20659;&#36664;&#27169;&#24335;&#65292;xv6 &#20351;&#29992; sleep / wakeup&#27231;&#21046;&#35731;&#28317;&#36890;&#36942;&#31243;&#26356;&#26377;&#25928;&#29575;&#65292;&#28040;&#36027;&#32773;&#33021;&#22816;&#35731;&#20986;CPU&#30340;&#36039;&#28304;&#65292;&#32780;&#19981;&#26159;&#31354;&#31561;&#65292;&#28187;&#23569;&#20308;&#29992;&#36039;&#28304;&#24773;&#27841;&#12290; </span></p><p class="c1 c8"><span class="c7"></span></p><p class="c1"><span>&#24478;&#23526;&#20316;&#36942;&#31243;&#21487;&#20197;&#30475;&#21040;&#65292;sleep &#35731; process &#22312; wait channel &#19978;&#36914;&#20837;&#30561;&#30496;&#29376;&#24907;&#65292;&#19981;&#20877;&#20308;&#29992;CPU&#36039;&#28304;&#12290;</span></p></td></tr><tr class="c5"><td class="c22" colspan="1" rowspan="1"><p class="c3"><span class="c7">process &#20132;&#25563;&#27231;&#21046; - 2</span></p></td><td class="c48" colspan="1" rowspan="1"><p class="c3"><span>proc.c &#30340; </span><span class="c17"><a class="c10" href="https://www.google.com/url?q=https://github.com/wei-yuan/xv6-public/blob/master/proc.c%23L468&amp;sa=D&amp;ust=1508162753961000&amp;usg=AFQjCNGw9kp3JRIAG4oMDljwkwnA_s5JqQ">wakeup()</a></span><span>&nbsp;&#20197;&#21450; </span><span class="c17"><a class="c10" href="https://www.google.com/url?q=https://github.com/wei-yuan/xv6-public/blob/master/proc.c%23L458&amp;sa=D&amp;ust=1508162753961000&amp;usg=AFQjCNHedAHVmLimD5U1Ut7VdIO-vOBGpg">wakeup1()</a></span></p></td><td class="c35" colspan="1" rowspan="1"><p class="c1"><span class="c7">void</span></p><p class="c1"><span class="c7">wakeup(void *chan)</span></p><p class="c1"><span class="c7">{</span></p><p class="c1"><span class="c7">&nbsp; &nbsp; acquire(&amp;ptable.lock);</span></p><p class="c1"><span class="c7">&nbsp; &nbsp; wakeup1(chan);</span></p><p class="c1"><span class="c7">&nbsp; &nbsp; release(&amp;ptable.lock);</span></p><p class="c1"><span class="c7">}</span></p><p class="c1 c8"><span class="c7"></span></p><p class="c1"><span class="c4">// Wake up all processes sleeping on channel</span></p><p class="c1"><span class="c7">static void</span></p><p class="c1"><span class="c7">wakeup1(void *chan)</span></p><p class="c1"><span class="c7">{</span></p><p class="c1"><span class="c7">&nbsp; &nbsp; struct proc *p;</span></p><p class="c1 c8"><span class="c7"></span></p><p class="c1"><span class="c7">&nbsp; &nbsp; for(p = ptable.proc; p &lt; &amp;ptable.proc[NPROC]; p++)</span></p><p class="c1"><span class="c7">&nbsp; &nbsp; &nbsp; &nbsp; if(p-&gt;state == SLEEPING &amp;&amp; p-&gt;chan == chan)</span></p><p class="c1"><span class="c7">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; p-&gt;state = RUNNABLE;</span></p><p class="c1"><span>}</span></p><p class="c1 c8"><span class="c7"></span></p><p class="c3"><span>wakeup &#36000;&#36012;&#21914;&#37266;&#27491;&#22312;channel&#19978; sleep &#29376;&#24907;&#30340; process</span></p></td></tr></tbody></table><p class="c1 c8"><span class="c7"></span></p><h2 class="c33" id="h.v367zguifw39"><span class="c14">&#36039;&#26009;&#32080;&#27083;</span></h2><p class="c1"><span>&#21478;&#22806;&#25972;&#29702;&#22312;hackMD&#19978;(</span><span class="c17"><a class="c10" href="https://www.google.com/url?q=https://hackmd.io/s/BkuiKgbT-&amp;sa=D&amp;ust=1508162753966000&amp;usg=AFQjCNHgNlivdIAZQZ8TnPNDjoVZDszCaw">[OS] xv6 &#25490;&#31243;(scheduling)&#20351;&#29992;&#30340;&#36039;&#26009;&#32080;&#27083;</a></span><span class="c7">)&#65292;&#35222;&#35258;&#19978;&#36611;&#28858;&#31777;&#28500; </span></p><h3 class="c46" id="h.snq2evajv9lf"><span class="c60">&#23526;&#20316;&#20998;&#26512; - &#21443;&#32771;&#36039;&#26009;: </span></h3><p class="c1"><span class="c32">[1] </span><span class="c17 c32"><a class="c10" href="https://www.google.com/url?q=https://www.google.com.tw/url?sa%3Dt%26rct%3Dj%26q%3D%26esrc%3Ds%26source%3Dweb%26cd%3D6%26cad%3Drja%26uact%3D8%26ved%3D0ahUKEwig_J3rmejWAhVNtJQKHc8RDc0QFghMMAU%26url%3Dhttp%253A%252F%252Fwww.cs.fsu.edu%252F~zwang%252Ffiles%252Fcop4610%252FFall2016%252FSchedule.pdf%26usg%3DAOvVaw0Ny5ULVqO24smkWoPipVN4&amp;sa=D&amp;ust=1508162753967000&amp;usg=AFQjCNGSO5vakjNd8p3Dgr_0WF3uxMWoCw">Scheduling in Xv6 - Florida State University</a></span></p><p class="c1"><span>[2] </span><span class="c17"><a class="c10" href="https://www.google.com/url?q=http://www.aqualab.cs.northwestern.edu/classes/EECS343/eecs-343-f11/lectures/06-Scheduling.pdf&amp;sa=D&amp;ust=1508162753969000&amp;usg=AFQjCNEDElpTISEnzNfc4UNg2IViv53Qsg">Scheduling</a></span></p><p class="c1"><span>[3] </span><span class="c17"><a class="c10" href="https://www.google.com/url?q=https://pdos.csail.mit.edu/6.828/2011/xv6/book-rev6.pdf&amp;sa=D&amp;ust=1508162753969000&amp;usg=AFQjCNG7DctpR3MGiWFXuX5o2Cczjy3NYA">xv6 document</a></span></p><p class="c1"><span>[4] </span><span class="c17"><a class="c10" href="https://www.google.com/url?q=https://upstream4years.wordpress.com/2016/03/02/xv6-scheduling/&amp;sa=D&amp;ust=1508162753970000&amp;usg=AFQjCNGezvWdCH1nHaE96Y-w9bF598DXPw">XV6 Scheduling</a></span></p><p class="c1"><span>[5] </span><span class="c17"><a class="c10" href="https://www.google.com/url?q=https://pdos.csail.mit.edu/6.828/2009/lec/l-threads.html&amp;sa=D&amp;ust=1508162753971000&amp;usg=AFQjCNFlC9SVeyu9Roaxi3Q10ESgBT-ZNw">Context switching</a></span></p></td></tr></tbody></table><p class="c13 c8"><span class="c7"></span></p><p class="c13 c8"><span class="c0"></span></p><p class="c13 c8"><span class="c19"></span></p><p class="c13 c8"><span class="c24"></span></p><p class="c13 c8"><span class="c19"></span></p></body></html>